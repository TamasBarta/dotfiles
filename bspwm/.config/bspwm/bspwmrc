#! /bin/sh

source /home/tamas/.dotfiles/.zsh/rbenv.zsh

eval $(awk '$0="export "$0' /home/tamas/.config/environment.d/*.conf)

export QT_AUTO_SCREEN_SCALE_FACTOR=1
export GDK_SCALE=2
export GDK_DPI_SCALE=0.5
export QT_QPA_PLATFORMTHEME=qt5ct
wmname LG3D

rm $HOME/.dotfiles/.dunstmuted
killall dunst; dunst &
killall sxhkd; sxhkd &
killall picom; picom &
killall compton; compton &
killall polkit-kde-authentication-agent-1; /usr/lib/polkit-kde-authentication-agent-1 &
# killall polybar; polybar example &
/home/tamas/.config/polybar/launch.sh & 
# killall optimus-manager-qt; optimus-manager-qt &
killall fusuma; fusuma &
/home/tamas/.dotfiles/scripts/apply-touchpad-settings.sh &

setxkbmap gb
setxkbmap -option caps:super
killall xcape; xcape -e 'Super_L=Escape' &
killall xbindkeys; xbindkeys -n -v &
xsetroot -cursor_name left_ptr

~/.fehbg

bspc monitor -d browser dev comm prod off misc macos gaming

bspc config border_width         8
bspc config normal_border_color  "#292D3E"
bspc config focused_border_color "#7EAEF1"
bspc config active_border_color  "#292D3E"
bspc config presel_border_color  "#7EAEF1"
bspc config urgent_border_color  "#F76D47"
bspc config window_gap          45

bspc config split_ratio          0.52
bspc config borderless_monocle   true
bspc config gapless_monocle      true

# bspc desktop browser -l monocle

bspc rule -a TelegramDesktop desktop='^5'
bspc rule -a Caprine desktop='^5'
bspc rule -a slack desktop='^3'
bspc rule -a Spotify desktop='^5'
bspc rule -a steam desktop='^8' state=fullscreen
# bspc rule -a firefox-kde-opensuse desktop='^1'
bspc rule -a Screenkey manage=off
bspc rule -a plasmashell sticky=true manage=off state=floating layer=above
bspc rule -a lattedock sticky=true manage=off state=floating layer=above
# bspc rule -a kitty state=pseudo_tiled
bspc rule -a scrcpy state=pseudo_tiled
bspc rule -a jetbrains-toolbox state=floating
bspc rule -a java-lang-Thread state=pseudo_tiled


if ! pgrep -x spotify; then /usr/local/bin/spotify; fi &
if ! pgrep -x caprine; then caprine; fi &
if ! pgrep -x telegram-desktop; then telegram-desktop; fi &
